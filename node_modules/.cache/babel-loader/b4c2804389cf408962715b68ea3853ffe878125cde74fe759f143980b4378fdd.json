{"ast":null,"code":"import create from 'zustand';\nimport axios from 'axios';\nimport debounce from '../helpers/debounce';\nconst homeStore = create(set => ({\n  coins: [],\n  trending: [],\n  query: \"\",\n  searching: false,\n  searched: false,\n  setQuery: e => {\n    set({\n      query: e.target.value\n    });\n    homeStore.getState().searchCoins();\n  },\n  searchCoins: debounce(async () => {\n    set({\n      searching: true\n    });\n    const {\n      query,\n      trending\n    } = homeStore.getState();\n    if (query.length > 2) {\n      const res = await axios.get(`https://api.coingecko.com/api/v3/search?query=${query}`);\n      const coins = res.data.coins.map(coin => {\n        return {\n          name: coin.name,\n          image: coin.large,\n          id: coin.id\n        };\n      });\n      set({\n        coins,\n        searching: false,\n        searched: true\n      });\n    } else {\n      set({\n        coins: trending,\n        searching: false\n      });\n    }\n  }, 500),\n  fetchCoins: async () => {\n    const [res, btcRes] = await Promise.all([axios.get(\"https://api.coingecko.com/api/v3/search/trending\"), axios.get(\"https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd\")]);\n    const btcPrice = btcRes.data.bitcoin.usd;\n    const coins = res.data.coins.map(coin => {\n      return {\n        name: coin.item.name,\n        image: coin.item.large,\n        id: coin.item.id,\n        priceBtc: coin.item.price_btc.toFixed(10),\n        priceUsd: (coin.item.price_btc * btcPrice).toFixed(10)\n      };\n    });\n    set({\n      coins,\n      trending: coins\n    });\n  }\n}));\nexport default homeStore;","map":{"version":3,"names":["create","axios","debounce","homeStore","set","coins","trending","query","searching","searched","setQuery","e","target","value","getState","searchCoins","length","res","get","data","map","coin","name","image","large","id","fetchCoins","btcRes","Promise","all","btcPrice","bitcoin","usd","item","priceBtc","price_btc","toFixed","priceUsd"],"sources":["/Users/dannyromero/Development/Web Applications/crypto-tracker/src/stores/homeStore.js"],"sourcesContent":["import create from 'zustand'\nimport axios from 'axios';\nimport debounce from '../helpers/debounce';\n\nconst homeStore = create((set) => ({\n    coins: [], \n    trending: [],\n    query: \"\",\n    searching: false, \n    searched: false, \n\n\n    setQuery: (e) => {\n        set({ query: e.target.value })\n        homeStore.getState().searchCoins()\n    }, \n\n    searchCoins: debounce(async () => {\n        set({ searching: true })\n        const { query, trending } = homeStore.getState()\n\n        if(query.length > 2){\n            const res = await axios.get(`https://api.coingecko.com/api/v3/search?query=${query}`);\n            \n            const coins = res.data.coins.map((coin) => {\n                return {\n                    name: coin.name,\n                    image: coin.large,\n                    id: coin.id,  \n                };\n            })\n\n            set({ coins, searching: false, searched: true});\n        }  else {\n            set({ coins: trending, searching: false});\n        }\n    }, 500),\n\n  fetchCoins: async () => {\n    const [res, btcRes ] = await Promise.all([\n        axios.get(\"https://api.coingecko.com/api/v3/search/trending\"),\n        axios.get(\"https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd\"),\n    ])\n\n    const btcPrice = btcRes.data.bitcoin.usd;\n    \n    const coins = res.data.coins.map((coin) => {\n        return {\n            name: coin.item.name,\n            image: coin.item.large,\n            id: coin.item.id,\n            priceBtc: coin.item.price_btc.toFixed(10),\n            priceUsd: (coin.item.price_btc * btcPrice).toFixed(10),\n        };\n    })\n\n    set({ coins, trending: coins })\n  }\n}))\n\nexport default homeStore"],"mappings":"AAAA,OAAOA,MAAM,MAAM,SAAS;AAC5B,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,QAAQ,MAAM,qBAAqB;AAE1C,MAAMC,SAAS,GAAGH,MAAM,CAAEI,GAAG,KAAM;EAC/BC,KAAK,EAAE,EAAE;EACTC,QAAQ,EAAE,EAAE;EACZC,KAAK,EAAE,EAAE;EACTC,SAAS,EAAE,KAAK;EAChBC,QAAQ,EAAE,KAAK;EAGfC,QAAQ,EAAGC,CAAC,IAAK;IACbP,GAAG,CAAC;MAAEG,KAAK,EAAEI,CAAC,CAACC,MAAM,CAACC;IAAM,CAAC,CAAC;IAC9BV,SAAS,CAACW,QAAQ,EAAE,CAACC,WAAW,EAAE;EACtC,CAAC;EAEDA,WAAW,EAAEb,QAAQ,CAAC,YAAY;IAC9BE,GAAG,CAAC;MAAEI,SAAS,EAAE;IAAK,CAAC,CAAC;IACxB,MAAM;MAAED,KAAK;MAAED;IAAS,CAAC,GAAGH,SAAS,CAACW,QAAQ,EAAE;IAEhD,IAAGP,KAAK,CAACS,MAAM,GAAG,CAAC,EAAC;MAChB,MAAMC,GAAG,GAAG,MAAMhB,KAAK,CAACiB,GAAG,CAAE,iDAAgDX,KAAM,EAAC,CAAC;MAErF,MAAMF,KAAK,GAAGY,GAAG,CAACE,IAAI,CAACd,KAAK,CAACe,GAAG,CAAEC,IAAI,IAAK;QACvC,OAAO;UACHC,IAAI,EAAED,IAAI,CAACC,IAAI;UACfC,KAAK,EAAEF,IAAI,CAACG,KAAK;UACjBC,EAAE,EAAEJ,IAAI,CAACI;QACb,CAAC;MACL,CAAC,CAAC;MAEFrB,GAAG,CAAC;QAAEC,KAAK;QAAEG,SAAS,EAAE,KAAK;QAAEC,QAAQ,EAAE;MAAI,CAAC,CAAC;IACnD,CAAC,MAAO;MACJL,GAAG,CAAC;QAAEC,KAAK,EAAEC,QAAQ;QAAEE,SAAS,EAAE;MAAK,CAAC,CAAC;IAC7C;EACJ,CAAC,EAAE,GAAG,CAAC;EAETkB,UAAU,EAAE,YAAY;IACtB,MAAM,CAACT,GAAG,EAAEU,MAAM,CAAE,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CACrC5B,KAAK,CAACiB,GAAG,CAAC,kDAAkD,CAAC,EAC7DjB,KAAK,CAACiB,GAAG,CAAC,6EAA6E,CAAC,CAC3F,CAAC;IAEF,MAAMY,QAAQ,GAAGH,MAAM,CAACR,IAAI,CAACY,OAAO,CAACC,GAAG;IAExC,MAAM3B,KAAK,GAAGY,GAAG,CAACE,IAAI,CAACd,KAAK,CAACe,GAAG,CAAEC,IAAI,IAAK;MACvC,OAAO;QACHC,IAAI,EAAED,IAAI,CAACY,IAAI,CAACX,IAAI;QACpBC,KAAK,EAAEF,IAAI,CAACY,IAAI,CAACT,KAAK;QACtBC,EAAE,EAAEJ,IAAI,CAACY,IAAI,CAACR,EAAE;QAChBS,QAAQ,EAAEb,IAAI,CAACY,IAAI,CAACE,SAAS,CAACC,OAAO,CAAC,EAAE,CAAC;QACzCC,QAAQ,EAAE,CAAChB,IAAI,CAACY,IAAI,CAACE,SAAS,GAAGL,QAAQ,EAAEM,OAAO,CAAC,EAAE;MACzD,CAAC;IACL,CAAC,CAAC;IAEFhC,GAAG,CAAC;MAAEC,KAAK;MAAEC,QAAQ,EAAED;IAAM,CAAC,CAAC;EACjC;AACF,CAAC,CAAC,CAAC;AAEH,eAAeF,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}